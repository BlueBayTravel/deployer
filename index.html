---
layout: default
---


<h1>
<a id="introduction" class="anchor" href="#introduction" aria-hidden="true"><span class="octicon octicon-link"></span></a>Introduction</h1>

<p>Deployer is a application for managing the deployment of PHP applications</p>

<a href="/screenshots">Screenshots</a>

<h2>
<a id="what-it-does" class="anchor" href="#what-it-does" aria-hidden="true"><span class="octicon octicon-link"></span></a>What it does:</h2>

<ul>
<li>Deploys applications to multiple servers accessible via SSH</li>
<li>Clones your projects git repository</li>
<li>Installs composer dependencies</li>
<li>Runs arbitrary commands</li>
<li>Gracefully handles failure in any of these steps</li>
<li>Keeps a number of previous deployments</li>
</ul>

<h2>
<a id="what-it-doesnt-do" class="anchor" href="#what-it-doesnt-do" aria-hidden="true"><span class="octicon octicon-link"></span></a>What it doesn't do:</h2>

<ul>
<li>Provision VMs</li>
<li>Install system packages</li>
<li>Configure the web server, database or other services</li>
</ul>

<h1>
<a id="why" class="anchor" href="#why" aria-hidden="true"><span class="octicon octicon-link"></span></a>Why?</h1>

<p>Deployer was heavily inspired by <a href="https://envoyer.io">Envoyer.io</a>, if you want a reliable deployment system I suggest you give Envoyer a try.</p>

<p>Deployer came about as I needed a deployment system for deploying updates for a PHP application to a large number of clients. Although Envoyer was almost perfect it was missing 2 key things I needed</p>

<p>Firstly, I was unable to use a hosted service as it would not be able to connect to the servers I needed to deploy to without a lot of network configuration changes.</p>

<p>Secondly, the code for the application I was deploying was hosted on a Gitlab server, and Envoyer only supported Github &amp; Bitbucket at the time.</p>

<p>For these reasons I decided to make a clone of Envoyer which suited my needs, at the same time using it as an excuse to learn Laravel 5.</p>

<h1>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h1>

<h4>
<a id="prerequisites" class="anchor" href="#prerequisites" aria-hidden="true"><span class="octicon octicon-link"></span></a>Prerequisites</h4>

<ul>
  <li>PHP &gt;= 5.5.9</li>
  <li>PHP Mcrypt extension</li>
  <li>PHP SQLite extension</li>
  <li>PHP OpenSSL extension</li>
  <li>PHP Mbstring extension</li>
  <li>PHP Tokenizer extension</li>
  <li>PHP Json extension (normally built in)</li>
  <li>beanstalkd</li>
  <li>redis</li>
  <li>composer</li>
  <li>node</li>
</ul>

<p>If you are not using a release version you will also need</p>
<ul>
  <li>bower</li>
  <li>gulp</li>
</ul>

<p><strong>Clone the repository</strong></p>

<pre><code>$ git clone https://github.com/REBELinBLUE/deployer.git
</code></pre>


<p><strong>Checkout the latest release</strong></p>
<pre><code>$ git checkout 0.5.14</code></pre>

<p><strong>Install dependencies</strong></p>

<pre><code>$ composer install
$ npm install</code></pre>

<p><strong>Setup config</strong></p>

<pre><code>$ cp .env.example .env
$ editor .env</code></pre>

<p>An example of the config</p>

<pre><code>APP_ENV=production
APP_URL=http://deploy.app
APP_DEBUG=false
APP_KEY=cJKwSTJFF75DK29ecw72ZRrkS6D0tqHy # Can be generated with php artisan key:generate
QUEUE_DRIVER=beanstalkd
BROADCAST_DRIVER=redis
SOCKET_URL=http://deploy.app</code></pre>

<p><strong>Setup the database</strong></p>

<pre><code>$ touch storage/database.sqlite # Only if using sqlite
$ php artisan migrate
</code></pre>

<p><strong>If not using a release (i.e. if you are using master)</strong></p>
<pre><code>$ bower install
$ gulp --production
</code></pre>

<p><strong>Start the queue listener (see supervisor.conf.example for a supervisord config)</strong></p>

<pre><code>$ php artisan queue:listen --queue=default,high,low --timeout=0 --tries=1</code></pre>

<p><strong>Start the node server</strong></p>

<pre><code>$ node socket.js</code></pre>

<p><strong>Setup a cronjob (see crontab.example)</strong</p>
<pre><code>
* * * * * root php /var/www/deployer/artisan schedule:run 1>> /dev/null 2>&1</code></pre>

<p>Finally visit the site to login, the default login is <code>admin@example.com</code> with the password <code>password</code></p>
